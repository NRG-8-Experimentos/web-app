<div class="register-screen">
  <div class="register-container">
    <div class="register-title">
      <p>Registro</p>
    </div>
    <div class="register-form">
      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <div class="register-form-row">
          <mat-form-field appearance="fill" class="custom-form-field full-width">
            <mat-label>Nombre</mat-label>
            <mat-icon matPrefix style="color: #888;">abc</mat-icon>
            <input matInput formControlName="name" placeholder="Nombre" type="text" required>
            @if (registerForm.get('name')?.hasError('required')) {
              <mat-error>
                El nombre es <strong>requerido</strong>
              </mat-error>
            }
          </mat-form-field>
          <mat-form-field appearance="fill" class="custom-form-field full-width">
            <mat-label>Apellido</mat-label>
            <mat-icon matPrefix style="color: #888;">abc</mat-icon>
            <input matInput formControlName="surname" placeholder="Apellido" type="text" required>
            @if (registerForm.get('surname')?.hasError('required')) {
              <mat-error>
                El apellido es <strong>requerido</strong>
              </mat-error>
            }
          </mat-form-field>
        </div>
        <div>
          <mat-form-field appearance="fill" class="custom-form-field full-width">
            <mat-label>Usuario</mat-label>
            <mat-icon matPrefix style="color: #888;">person</mat-icon>
            <input matInput formControlName="username" placeholder="Usuario" type="text" required>
            @if (registerForm.get('username')?.hasError('required')) {
              <mat-error>
                El nombre de usuario es <strong>requerido</strong>
              </mat-error>
            }
          </mat-form-field>
        </div>
        <div>
          <mat-form-field appearance="fill" class="custom-form-field full-width">
            <mat-label>Correo Electrónico</mat-label>
            <mat-icon matPrefix style="color: #888;">mail</mat-icon>
            <input matInput formControlName="email" placeholder="Correo Electrónico" type="email" required>
            @if (registerForm.get('email')?.hasError('required')) {
              <mat-error>
                El correo electrónico es <strong>requerido</strong>
              </mat-error>
            }
          </mat-form-field>
        </div>
        <div>
          <mat-form-field appearance="fill" class="custom-form-field full-width">
            <mat-label>Url de foto de perfil</mat-label>
            <mat-icon matPrefix style="color: #888;">link</mat-icon>
            <input matInput formControlName="imgUrl" placeholder="Url de foto de perfil" type="text" required>
            @if (registerForm.get('imgUrl')?.hasError('required')) {
              <mat-error>
                El enlace a la foto de perfil es <strong>requerido</strong>
              </mat-error>
            }
          </mat-form-field>
        </div>
        <div>
          <mat-form-field appearance="fill" class="custom-form-field full-width">
            <mat-label>Contraseña</mat-label>
            <mat-icon matPrefix style="color: #888;">lock</mat-icon>
            <input matInput [type]="showPassword ? 'text' : 'password'" formControlName="password" placeholder="Contraseña" required>
            <button mat-icon-button matSuffix (click)="showPassword = !showPassword" type="button" tabindex="-1">
              <mat-icon>{{ showPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
            </button>
            @if (registerForm.get('password')?.hasError('required')) {
              <mat-error>
                La contraseña es <strong>requerida</strong>
              </mat-error>
            }
          </mat-form-field>
        </div>
        <div>
          <mat-form-field appearance="fill" class="custom-form-field full-width">
            <mat-label>Confirmar Contraseña</mat-label>
            <mat-icon matPrefix style="color: #888;">lock</mat-icon>
            <input matInput [type]="showConfirmPassword ? 'text' : 'password'" formControlName="confirmPassword" placeholder="Confirmar Contraseña" required>
            <button mat-icon-button matSuffix (click)="showConfirmPassword = !showConfirmPassword" type="button" tabindex="-1">
              <mat-icon>{{ showConfirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
            </button>
            @if (registerForm.hasError('passwordMismatch') && registerForm.get('confirmPassword')?.touched) {
              <mat-error>
                <mat-icon style="vertical-align: middle; color: #d32f2f;">error</mat-icon>
                Las contraseñas no coinciden
              </mat-error>
            }
          </mat-form-field>
        </div>

        <div class="toggle-container">
          <p style="font-weight: bold; font-size: 18px;">Rol</p>
          <div>
            <mat-button-toggle-group formControlName="role" appearance="legacy" class="role-toggle-group" name="role" aria-label="Rol">
              <mat-button-toggle value="leader">Líder</mat-button-toggle>
              <mat-button-toggle value="member">Miembro</mat-button-toggle>
            </mat-button-toggle-group>
          </div>
        </div>
        <div class="register-button-container">
          <div class="register-button">
            <button
              mat-raised-button
              color="primary"
              type="submit"
              [disabled]="registerForm.invalid"
              [ngClass]="registerForm.valid ? 'register-button-valid' : 'register-button-invalid'"
            >
              Registrarse
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
